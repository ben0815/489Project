This fix focuses on correctly implementing the security stack as described in the spec. Previously the database would add and delete permissions at will, given they passed all failure conditions. For example, if bob had delegate permission on x, but no read permission, and delegated read permission to alice, then alice would incorrectly be able to read x. From security stack spec, alice should only be able to read if bob also has read permission. Completely changed the database method from sets of permissions to a list of set delegations. This allows the permissions to be checked correctly, using the transitive property of the security stack. 